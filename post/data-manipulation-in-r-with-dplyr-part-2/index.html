<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.26" />

  <title>Data Manipulation in R with dplyr - Part 2 &middot; Rsquared Academy Blog</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="../../css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="../../css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="../../css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/Github.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="../../img/favicon.ico" type="image/x-icon" />


  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="../../"><img src="../../img/logo.png" alt="Mapflat logo"></a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../start-here"><i class='fa fa-play fa-fw'></i>New? Start Here</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../topics"><i class='fa fa-bars fa-fw'></i>Topics</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://rsquaredacademy.github.io/"><i class='fa fa-graduation-cap fa-fw'></i>Courses</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://rsquaredlabs.com:3838/explorer/"><i class='fa fa-cube fa-fw'></i>Shiny Apps</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://rsquaredacademy.github.io/pkgs/"><i class='fa fa-code fa-fw'></i>Packages</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../subscribe/"><i class='fa fa-envelope fa-fw'></i>Subscribe</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/rsquaredacademy" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://facebook.com/rsquaredacademy" target="_blank"><i class="fa fa-facebook-square fa-fw"></i>Facebook</a>
    </li>
    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://youtube.com/user/rsquaredin" target="_blank"><i class="fa fa-youtube-square fa-fw"></i>YouTube</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://vimeo.com/rsquaredacademy" target="_blank"><i class="fa fa-vimeo-square fa-fw"></i>Vimeo</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="http://slideshare.net/rsquaredin" target="_blank"><i class="fa fa-slideshare fa-fw"></i>SlideShare</a>
    </li>
    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/rsquaredacademy" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2014-2017. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">

<link rel="stylesheet" href="//css/dracula.css">
<script src="//js/highlight.pack.js"></script>
<script>
  hljs.initHighlightingOnLoad();
</script> 


<div class="header">
  <h1>Data Manipulation in R with dplyr - Part 2</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>22 May 2017</time>
  </div>

  

  
  
  
  <div>
    <i class="fa fa-folder fa-fw"></i>
    
      <a class="post-taxonomy-topic" href="../../topics/data-wrangling">data-wrangling</a>
    
  </div>
  
  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="../../tags/dplyr">dplyr</a>
    
  </div>
  
  

</div>

  <p><a href="https://twitter.com/login?redirect_after_login=%2Fhome%3Fstatus"><img src="http://i.imgur.com/tXSoThF.png" alt="Twitter" /></a> <a href="https://www.facebook.com/sharer/sharer.php?u="><img src="http://i.imgur.com/P3YfQoD.png" alt="Facebook" /></a></p>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>This is the eighth post in the series <strong>Data Wrangling with R</strong>. In a previous <a href="http://www.rsquaredacademy.com/blog/post/data-manipulation-in-r-with-dplyr-part-1/">post</a>, we learnt about dplyr verbs and used them to compute average order value for an e-commerce website data. In this post, we will learn to combine tables using different <code>join</code> functions provided in dplyr. Let us assume we have 2 tables <strong>y</strong> and <strong>y</strong>. Below are the different types of <code>join</code> functions provided in dplyr.</p>
<ul>
<li><p><code>inner_join()</code>: return all rows from x where there are matching values in y, and all columns from x and y. If there are multiple matches between x and y, all combination of the matches are returned.</p></li>
<li><p><code>left_join()</code>: return all rows from x, and all columns from x and y. Rows in x with no match in y will have NA values in the new columns. If there are multiple matches between x and y, all combinations of the matches are returned.</p></li>
<li><p><code>right_join()</code>: return all rows from y, and all columns from x and y. Rows in y with no match in x will have NA values in the new columns. If there are multiple matches between x and y, all combinations of the matches are returned.</p></li>
<li><p><code>semi_join()</code>: return all rows from x where there are matching values in y, keeping just columns from x. A semi join differs from an inner join because an inner join will return one row of x for each matching row of y, where a semi join will never duplicate rows of x.</p></li>
<li><p><code>anti_join()</code>: return all rows from x where there are not matching values in y, keeping just columns from x.</p></li>
<li><p><code>full_join()</code>: return all rows and all columns from both x and y. Where there are not matching values, returns NA for the one missing.</p></li>
</ul>
<div id="case-study" class="section level2">
<h2>Case Study</h2>
<p>We have two data sets with details of customers and their orders. We will use the above functions to combine the data sets in different ways to glean information about customer orders. Let us import the data from our github repository:</p>
<pre class="r"><code>order &lt;- readr::read_csv(&#39;https://raw.githubusercontent.com/rsquaredacademy/datasets/master/order.csv&#39;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   id = col_integer(),
##   order_data = col_character(),
##   order_number = col_integer(),
##   customer_id = col_integer(),
##   amount = col_double()
## )</code></pre>
<pre class="r"><code>order</code></pre>
<pre><code>## # A tibble: 300 x 5
##       id order_data order_number customer_id  amount
##    &lt;int&gt;      &lt;chr&gt;        &lt;int&gt;       &lt;int&gt;   &lt;dbl&gt;
##  1   368   7/2/2016       543346         352  364.97
##  2   286  11/2/2016       543390         305 2063.53
##  3    28  2/22/2017       543404          78  432.06
##  4   309   3/5/2017       543389         447  480.22
##  5     2 12/28/2016       543233         374  235.37
##  6    31 12/30/2016       543475          48 2745.24
##  7   179 12/21/2016       543155         280 2358.25
##  8   484 11/24/2016       543485         445 1030.58
##  9   115   9/9/2016       543489         278 1217.50
## 10   340   5/6/2017       543246         131 1184.39
## # ... with 290 more rows</code></pre>
<pre class="r"><code>customer &lt;- readr::read_csv(&#39;https://raw.githubusercontent.com/rsquaredacademy/datasets/master/customer.csv&#39;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   id = col_integer(),
##   first_name = col_character(),
##   last_name = col_character(),
##   city = col_character(),
##   phone = col_character()
## )</code></pre>
<pre class="r"><code>customer</code></pre>
<pre><code>## # A tibble: 91 x 5
##       id first_name             last_name       city           phone
##    &lt;int&gt;      &lt;chr&gt;                 &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;
##  1     1  Elbertine            Robertucci California 1-(805)951-9083
##  2     2   Marcella              Kilshall   Colorado 1-(303)642-9320
##  3     3      Daria de la Valette Parisot    Florida 1-(352)629-9125
##  4     4   Sherilyn                  Widd Distric... 1-(202)453-3897
##  5     5      Ketty               Cridlin      Texas 1-(214)455-2169
##  6     6     Jethro            Lubomirski California 1-(510)278-9668
##  7     7   Jeremiah              Carrabot California 1-(559)713-9864
##  8     8 Constancia              Eastmead      Texas 1-(806)550-1701
##  9     9      Muire             Prestwich      Idaho 1-(208)811-7437
## 10    10    Abigail                Craigs      Texas 1-(469)653-1340
## # ... with 81 more rows</code></pre>
<p><br></p>
<div id="inner-join" class="section level3">
<h3>inner join</h3>
<pre class="r"><code>customer %&gt;%
  inner_join(order)</code></pre>
<pre><code>## Joining, by = &quot;id&quot;</code></pre>
<pre><code>## # A tibble: 55 x 9
##       id first_name  last_name       city           phone order_data order_number customer_id  amount
##    &lt;int&gt;      &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;      &lt;chr&gt;        &lt;int&gt;       &lt;int&gt;   &lt;dbl&gt;
##  1     2   Marcella   Kilshall   Colorado 1-(303)642-9320 12/28/2016       543233         374  235.37
##  2     2   Marcella   Kilshall   Colorado 1-(303)642-9320  8/31/2016       543129         334 1150.40
##  3     5      Ketty    Cridlin      Texas 1-(214)455-2169  1/17/2017       543453         475  346.07
##  4     6     Jethro Lubomirski California 1-(510)278-9668  1/27/2017       543274         218 2317.16
##  5     7   Jeremiah   Carrabot California 1-(559)713-9864  6/21/2016       543423         282  135.53
##  6     7   Jeremiah   Carrabot California 1-(559)713-9864  2/13/2017       543379         346 1407.32
##  7     7   Jeremiah   Carrabot California 1-(559)713-9864   7/8/2016       543477         483 1913.79
##  8     8 Constancia   Eastmead      Texas 1-(806)550-1701  11/5/2016       543157         341 2461.46
##  9     8 Constancia   Eastmead      Texas 1-(806)550-1701  5/19/2017       543117         364 2714.20
## 10     9      Muire  Prestwich      Idaho 1-(208)811-7437 12/28/2016       543201         207  187.03
## # ... with 45 more rows</code></pre>
<p><br></p>
</div>
<div id="left-join" class="section level3">
<h3>left join</h3>
<pre class="r"><code>customer %&gt;%
  left_join(order)</code></pre>
<pre><code>## Joining, by = &quot;id&quot;</code></pre>
<pre><code>## # A tibble: 104 x 9
##       id first_name             last_name       city           phone order_data order_number customer_id  amount
##    &lt;int&gt;      &lt;chr&gt;                 &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;      &lt;chr&gt;        &lt;int&gt;       &lt;int&gt;   &lt;dbl&gt;
##  1     1  Elbertine            Robertucci California 1-(805)951-9083       &lt;NA&gt;           NA          NA      NA
##  2     2   Marcella              Kilshall   Colorado 1-(303)642-9320 12/28/2016       543233         374  235.37
##  3     2   Marcella              Kilshall   Colorado 1-(303)642-9320  8/31/2016       543129         334 1150.40
##  4     3      Daria de la Valette Parisot    Florida 1-(352)629-9125       &lt;NA&gt;           NA          NA      NA
##  5     4   Sherilyn                  Widd Distric... 1-(202)453-3897       &lt;NA&gt;           NA          NA      NA
##  6     5      Ketty               Cridlin      Texas 1-(214)455-2169  1/17/2017       543453         475  346.07
##  7     6     Jethro            Lubomirski California 1-(510)278-9668  1/27/2017       543274         218 2317.16
##  8     7   Jeremiah              Carrabot California 1-(559)713-9864  6/21/2016       543423         282  135.53
##  9     7   Jeremiah              Carrabot California 1-(559)713-9864  2/13/2017       543379         346 1407.32
## 10     7   Jeremiah              Carrabot California 1-(559)713-9864   7/8/2016       543477         483 1913.79
## # ... with 94 more rows</code></pre>
<p><br></p>
</div>
<div id="right-join" class="section level3">
<h3>right join</h3>
<pre class="r"><code>customer %&gt;%
  right_join(order)</code></pre>
<pre><code>## Joining, by = &quot;id&quot;</code></pre>
<pre><code>## # A tibble: 300 x 9
##       id first_name last_name      city           phone order_data order_number customer_id  amount
##    &lt;int&gt;      &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt;      &lt;chr&gt;        &lt;int&gt;       &lt;int&gt;   &lt;dbl&gt;
##  1   368       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;            &lt;NA&gt;   7/2/2016       543346         352  364.97
##  2   286       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;            &lt;NA&gt;  11/2/2016       543390         305 2063.53
##  3    28      Avrit    Lerven     Texas 1-(817)651-5322  2/22/2017       543404          78  432.06
##  4   309       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;            &lt;NA&gt;   3/5/2017       543389         447  480.22
##  5     2   Marcella  Kilshall  Colorado 1-(303)642-9320 12/28/2016       543233         374  235.37
##  6    31    Clemmie   McKeady Tennessee 1-(865)334-8263 12/30/2016       543475          48 2745.24
##  7   179       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;            &lt;NA&gt; 12/21/2016       543155         280 2358.25
##  8   484       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;            &lt;NA&gt; 11/24/2016       543485         445 1030.58
##  9   115       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;            &lt;NA&gt;   9/9/2016       543489         278 1217.50
## 10   340       &lt;NA&gt;      &lt;NA&gt;      &lt;NA&gt;            &lt;NA&gt;   5/6/2017       543246         131 1184.39
## # ... with 290 more rows</code></pre>
<p><br></p>
</div>
<div id="semi-join" class="section level3">
<h3>semi join</h3>
<pre class="r"><code>customer %&gt;%
  semi_join(order)</code></pre>
<pre><code>## Joining, by = &quot;id&quot;</code></pre>
<pre><code>## # A tibble: 42 x 5
##       id first_name   last_name       city           phone
##    &lt;int&gt;      &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;
##  1    28      Avrit      Lerven      Texas 1-(817)651-5322
##  2     2   Marcella    Kilshall   Colorado 1-(303)642-9320
##  3    31    Clemmie     McKeady  Tennessee 1-(865)334-8263
##  4     8 Constancia    Eastmead      Texas 1-(806)550-1701
##  5    16    Monique     Van Zon   Missouri 1-(314)444-6148
##  6    15  Valentijn      Reddel California 1-(562)760-7094
##  7    65       Thea       Prose      Texas 1-(214)513-8473
##  8    50     Trudie   Bartolijn       Iowa 1-(515)197-8097
##  9    47  Radcliffe        Aers California 1-(213)580-7332
## 10    41      Alana Biesterfeld California 1-(661)871-1329
## # ... with 32 more rows</code></pre>
<p><br></p>
</div>
<div id="anti-join" class="section level3">
<h3>anti join</h3>
<pre class="r"><code>customer %&gt;%
  anti_join(order)</code></pre>
<pre><code>## Joining, by = &quot;id&quot;</code></pre>
<pre><code>## # A tibble: 49 x 5
##       id first_name             last_name       city           phone
##    &lt;int&gt;      &lt;chr&gt;                 &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;
##  1     1  Elbertine            Robertucci California 1-(805)951-9083
##  2     3      Daria de la Valette Parisot    Florida 1-(352)629-9125
##  3     4   Sherilyn                  Widd Distric... 1-(202)453-3897
##  4    10    Abigail                Craigs      Texas 1-(469)653-1340
##  5    11      Wynne                 Roote    Georgia 1-(404)911-0264
##  6    12     Pietra                Hynson  Minnesota 1-(651)506-8628
##  7    13       Bram                 Valde       Iowa 1-(515)637-1353
##  8    14       Rees           MacAllester   New York 1-(716)187-2661
##  9    17     Orazio                Boddis  Louisiana 1-(318)313-4592
## 10    18      Mason             Letterick      Texas 1-(806)351-0113
## # ... with 39 more rows</code></pre>
<p><br></p>
</div>
<div id="full-join" class="section level3">
<h3>full join</h3>
<pre class="r"><code>customer %&gt;%
  full_join(order)</code></pre>
<pre><code>## Joining, by = &quot;id&quot;</code></pre>
<pre><code>## # A tibble: 349 x 9
##       id first_name             last_name       city           phone order_data order_number customer_id  amount
##    &lt;int&gt;      &lt;chr&gt;                 &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;      &lt;chr&gt;        &lt;int&gt;       &lt;int&gt;   &lt;dbl&gt;
##  1     1  Elbertine            Robertucci California 1-(805)951-9083       &lt;NA&gt;           NA          NA      NA
##  2     2   Marcella              Kilshall   Colorado 1-(303)642-9320 12/28/2016       543233         374  235.37
##  3     2   Marcella              Kilshall   Colorado 1-(303)642-9320  8/31/2016       543129         334 1150.40
##  4     3      Daria de la Valette Parisot    Florida 1-(352)629-9125       &lt;NA&gt;           NA          NA      NA
##  5     4   Sherilyn                  Widd Distric... 1-(202)453-3897       &lt;NA&gt;           NA          NA      NA
##  6     5      Ketty               Cridlin      Texas 1-(214)455-2169  1/17/2017       543453         475  346.07
##  7     6     Jethro            Lubomirski California 1-(510)278-9668  1/27/2017       543274         218 2317.16
##  8     7   Jeremiah              Carrabot California 1-(559)713-9864  6/21/2016       543423         282  135.53
##  9     7   Jeremiah              Carrabot California 1-(559)713-9864  2/13/2017       543379         346 1407.32
## 10     7   Jeremiah              Carrabot California 1-(559)713-9864   7/8/2016       543477         483 1913.79
## # ... with 339 more rows</code></pre>
</div>
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
</div>
</div>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="../../post/forcats-working-with-factor-data-in-r/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="../../post/forcats-working-with-factor-data-in-r/">forcats: Working with factor data in R</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="../../post/data-manipulation-in-r-with-dplyr-part-3/">Data Manipulation in R with dplyr - Part 3</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="../../post/data-manipulation-in-r-with-dplyr-part-3/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="../../js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57270671-2', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

