<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.26" />

  <title>Quick Guide: R &amp; SQLite &middot; Rsquared Academy Blog</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="../../css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="../../css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="../../css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/github.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  

  <link rel="shortcut icon" href="../../img/favicon.ico" type="image/x-icon" />


  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  
  <a class="pure-menu-heading brand" href="../../"><img src="../../img/logo.png" alt="Mapflat logo"></a>


  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../start-here"><i class='fa fa-play fa-fw'></i>New? Start Here</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../post/"><i class='fa fa-list fa-fw'></i>Posts</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../topics"><i class='fa fa-bars fa-fw'></i>Topics</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://rsquaredacademy.github.io/"><i class='fa fa-graduation-cap fa-fw'></i>Courses</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="http://rsquaredlabs.com:3838/explorer/"><i class='fa fa-cube fa-fw'></i>Shiny Apps</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="https://rsquaredacademy.github.io/pkgs/"><i class='fa fa-code fa-fw'></i>Packages</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../about/"><i class='fa fa-user fa-fw'></i>About</a>
      
        </li>
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="../../subscribe/"><i class='fa fa-envelope fa-fw'></i>Subscribe</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/rsquaredacademy" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://facebook.com/rsquaredacademy" target="_blank"><i class="fa fa-facebook-square fa-fw"></i>Facebook</a>
    </li>
    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://youtube.com/user/rsquaredin" target="_blank"><i class="fa fa-youtube-square fa-fw"></i>YouTube</a>
    </li>
    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://vimeo.com/rsquaredacademy" target="_blank"><i class="fa fa-vimeo-square fa-fw"></i>Vimeo</a>
    </li>
    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="http://slideshare.net/rsquaredin" target="_blank"><i class="fa fa-slideshare fa-fw"></i>SlideShare</a>
    </li>
    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/rsquaredacademy" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small>&copy; 2014-2017. All rights reserved.</small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1>Quick Guide: R &amp; SQLite</h1>
  <h2></h2>
</div>
<div class="content">

  <div class="post-meta">

  <div>
    <i class="fa fa-calendar fa-fw"></i>
    <time>05 Feb 2017</time>
  </div>

  

  
  
  
  <div>
    <i class="fa fa-folder fa-fw"></i>
    
      <a class="post-taxonomy-topic" href="../../topics/data-wrangling">data-wrangling</a>
    
  </div>
  
  

  
  
  
  <div>
    <i class="fa fa-tags fa-fw"></i>
    
      <a class="post-taxonomy-tag" href="../../tags/sqlite">sqlite</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="../../tags/rsqlite">rsqlite</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="../../tags/database">database</a>&nbsp;&#47;
    
      <a class="post-taxonomy-tag" href="../../tags/import">import</a>
    
  </div>
  
  

</div>

  <p><a href="https://twitter.com/login?redirect_after_login=%2Fhome%3Fstatus"><img src="http://i.imgur.com/tXSoThF.png" alt="Twitter" /></a> <a href="https://www.facebook.com/sharer/sharer.php?u="><img src="http://i.imgur.com/P3YfQoD.png" alt="Facebook" /></a></p>
<div id="connection" class="section level2">
<h2>Connection</h2>
<pre class="r"><code>con &lt;- DBI::dbConnect(RSQLite::SQLite(), &quot;:memory:&quot;)</code></pre>
<div id="connection-summary" class="section level3">
<h3>Connection Summary</h3>
<pre class="r"><code>summary(con)</code></pre>
<pre><code>##           Length            Class             Mode 
##                1 SQLiteConnection               S4</code></pre>
</div>
<div id="list-tables" class="section level3">
<h3>List Tables</h3>
<pre class="r"><code>dbListTables(con)</code></pre>
<pre><code>## [1] &quot;ecom&quot;         &quot;sqlite_stat1&quot; &quot;sqlite_stat4&quot;</code></pre>
</div>
<div id="list-fields" class="section level3">
<h3>List Fields</h3>
<pre class="r"><code>DBI::dbListFields(con, &quot;ecom&quot;)</code></pre>
<pre><code>## [1] &quot;referrer&quot; &quot;device&quot;   &quot;bouncers&quot; &quot;n_visit&quot;  &quot;n_pages&quot;  &quot;duration&quot;</code></pre>
</div>
</div>
<div id="querying-data" class="section level2">
<h2>Querying Data</h2>
<ul>
<li><code>dbReadTable()</code>: read entire table</li>
<li><code>dbGetQuery()</code>: read few rows</li>
<li><code>dbSendQuery()</code> &amp; <code>dbFetch()</code>: read data in batches</li>
</ul>
<div id="entire-table" class="section level3">
<h3>Entire Table</h3>
<pre class="r"><code>DBI::dbReadTable(con, &#39;ecom&#39;)</code></pre>
<pre><code>##    referrer device bouncers n_visit n_pages duration
## 1    google laptop     true      10       1      693
## 2     yahoo tablet     true       9       1      459
## 3    direct laptop     true       0       1      996
## 4      bing tablet    false       3      18      468
## 5     yahoo mobile     true       9       1      955
## 6     yahoo laptop    false       5       5      135
## 7     yahoo mobile     true      10       1       75
## 8    direct mobile     true      10       1      908
## 9      bing mobile    false       3      19      209
## 10   google mobile     true       6       1      208
## 11   direct laptop     true       9       1      738
## 12   direct tablet    false       6      12      132
## 13   direct mobile    false       9      14      406
## 14    yahoo tablet    false       5       8       80
## 15    yahoo mobile    false       7       1       19
## 16     bing laptop     true       1       1      995
## 17     bing tablet    false       5      16      368
## 18   google tablet     true       7       1      406
## 19   social tablet    false       7      10      290
## 20   social tablet    false       2       1       28</code></pre>
</div>
<div id="few-rows" class="section level3">
<h3>Few Rows</h3>
<pre class="r"><code>DBI::dbGetQuery(con, &quot;select * from ecom limit 10&quot;)</code></pre>
<pre><code>##    referrer device bouncers n_visit n_pages duration
## 1    google laptop     true      10       1      693
## 2     yahoo tablet     true       9       1      459
## 3    direct laptop     true       0       1      996
## 4      bing tablet    false       3      18      468
## 5     yahoo mobile     true       9       1      955
## 6     yahoo laptop    false       5       5      135
## 7     yahoo mobile     true      10       1       75
## 8    direct mobile     true      10       1      908
## 9      bing mobile    false       3      19      209
## 10   google mobile     true       6       1      208</code></pre>
</div>
<div id="read-data-in-batches" class="section level3">
<h3>Read Data in Batches</h3>
<pre class="r"><code>query &lt;- DBI::dbSendQuery(con, &#39;select * from ecom&#39;)
result &lt;- DBI::dbFetch(query, n = 15)
result</code></pre>
<pre><code>##    referrer device bouncers n_visit n_pages duration
## 1    google laptop     true      10       1      693
## 2     yahoo tablet     true       9       1      459
## 3    direct laptop     true       0       1      996
## 4      bing tablet    false       3      18      468
## 5     yahoo mobile     true       9       1      955
## 6     yahoo laptop    false       5       5      135
## 7     yahoo mobile     true      10       1       75
## 8    direct mobile     true      10       1      908
## 9      bing mobile    false       3      19      209
## 10   google mobile     true       6       1      208
## 11   direct laptop     true       9       1      738
## 12   direct tablet    false       6      12      132
## 13   direct mobile    false       9      14      406
## 14    yahoo tablet    false       5       8       80
## 15    yahoo mobile    false       7       1       19</code></pre>
</div>
</div>
<div id="query" class="section level2">
<h2>Query</h2>
<div id="query-status" class="section level3">
<h3>Query Status</h3>
<pre class="r"><code>DBI::dbHasCompleted(query)</code></pre>
<pre><code>## [1] FALSE</code></pre>
</div>
<div id="query-info" class="section level3">
<h3>Query Info</h3>
<pre class="r"><code>DBI::dbGetInfo(query)</code></pre>
<pre><code>## $statement
## [1] &quot;select * from ecom&quot;
## 
## $row.count
## [1] 15
## 
## $rows.affected
## [1] 0
## 
## $has.completed
## [1] FALSE</code></pre>
</div>
<div id="latest-query" class="section level3">
<h3>Latest Query</h3>
<pre class="r"><code>DBI::dbGetStatement(query)</code></pre>
<pre><code>## [1] &quot;select * from ecom&quot;</code></pre>
</div>
<div id="rows-fetched" class="section level3">
<h3>Rows Fetched</h3>
<pre class="r"><code>DBI::dbGetRowCount(query)</code></pre>
<pre><code>## [1] 15</code></pre>
</div>
<div id="rows-affected" class="section level3">
<h3>Rows Affected</h3>
<pre class="r"><code>DBI::dbGetRowsAffected(query)</code></pre>
<pre><code>## [1] 0</code></pre>
</div>
<div id="column-info" class="section level3">
<h3>Column Info</h3>
<pre class="r"><code>DBI::dbColumnInfo(query)</code></pre>
<pre><code>##       name      type
## 1 referrer character
## 2   device character
## 3 bouncers character
## 4  n_visit   integer
## 5  n_pages    double
## 6 duration    double</code></pre>
</div>
<div id="clear-results" class="section level3">
<h3>Clear Results</h3>
<pre class="r"><code>DBI::dbClearResult(query)</code></pre>
</div>
</div>
<div id="create-table" class="section level2">
<h2>Create Table</h2>
<div id="introduction" class="section level3">
<h3>Introduction</h3>
<pre class="r"><code>x &lt;- 1:10
y &lt;- letters[1:10]
trial &lt;- tibble::tibble(x, y)
DBI::dbWriteTable(con, &quot;trial&quot;, trial)</code></pre>
</div>
<div id="check-if-table-is-created-in-database" class="section level3">
<h3>check if table is created in database</h3>
<pre class="r"><code>DBI::dbListTables(con)</code></pre>
<pre><code>## [1] &quot;ecom&quot;         &quot;sqlite_stat1&quot; &quot;sqlite_stat4&quot; &quot;trial&quot;</code></pre>
<pre class="r"><code>DBI::dbExistsTable(con, &quot;trial&quot;)</code></pre>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="query-sample-data-from-table" class="section level3">
<h3>query sample data from table</h3>
<pre class="r"><code>DBI::dbGetQuery(con, &quot;select * from trial limit 5&quot;)</code></pre>
<pre><code>##   x y
## 1 1 a
## 2 2 b
## 3 3 c
## 4 4 d
## 5 5 e</code></pre>
</div>
<div id="overwrite-table-in-the-database" class="section level3">
<h3>overwrite table in the database</h3>
<pre class="r"><code>x &lt;- sample(100, 10)
y &lt;- letters[11:20]
trial2 &lt;- tibble::tibble(x, y)
DBI::dbWriteTable(con, &quot;trial&quot;, trial2, overwrite = TRUE)</code></pre>
</div>
<div id="query-sample-data-from-table-to-see-if-it-has-been-overwritten" class="section level3">
<h3>query sample data from table to see if it has been overwritten</h3>
<pre class="r"><code>DBI::dbGetQuery(con, &quot;select * from trial limit 5&quot;)</code></pre>
<pre><code>##    x y
## 1 50 k
## 2 78 l
## 3 89 m
## 4 84 n
## 5 24 o</code></pre>
</div>
<div id="append-data-to-the-table-in-the-database" class="section level3">
<h3>append data to the table in the database</h3>
<pre class="r"><code>x &lt;- sample(100, 10)
y &lt;- letters[5:14]
trial3 &lt;- tibble::tibble(x, y)
DBI::dbWriteTable(con, &quot;trial&quot;, trial3, append = TRUE)</code></pre>
</div>
<div id="query-sample-data-from-table-to-see-if-new-data-is-appended" class="section level3">
<h3>query sample data from table to see if new data is appended</h3>
<pre class="r"><code>DBI::dbReadTable(con, &quot;trial&quot;)</code></pre>
<pre><code>##      x y
## 1   50 k
## 2   78 l
## 3   89 m
## 4   84 n
## 5   24 o
## 6   67 p
## 7   90 q
## 8    4 r
## 9  100 s
## 10  74 t
## 11  37 e
## 12  41 f
## 13  11 g
## 14  80 h
## 15  82 i
## 16  85 j
## 17  15 k
## 18   3 l
## 19  28 m
## 20  22 n</code></pre>
</div>
</div>
<div id="insert-rows" class="section level2">
<h2>Insert Rows</h2>
<div id="introduction-1" class="section level3">
<h3>Introduction</h3>
<pre class="r"><code>DBI::dbExecute(con,
  &quot;INSERT into trial (x, y) VALUES (32, &#39;c&#39;), (45, &#39;k&#39;), (61, &#39;h&#39;)&quot;
)</code></pre>
<pre><code>## [1] 3</code></pre>
</div>
<div id="insert-rows-1" class="section level3">
<h3>Insert Rows</h3>
<pre class="r"><code>DBI::dbSendStatement(con,
  &quot;INSERT into trial (x, y) VALUES (25, &#39;m&#39;), (54, &#39;l&#39;), (16, &#39;y&#39;)&quot;
)</code></pre>
<pre><code>## &lt;SQLiteResult&gt;
##   SQL  INSERT into trial (x, y) VALUES (25, &#39;m&#39;), (54, &#39;l&#39;), (16, &#39;y&#39;)
##   ROWS Fetched: 0 [complete]
##        Changed: 3</code></pre>
</div>
</div>
<div id="sqlite-data-type" class="section level2">
<h2>SQLite Data Type</h2>
<pre class="r"><code>DBI::dbDataType(RSQLite::SQLite(), &quot;a&quot;)</code></pre>
<pre><code>## [1] &quot;TEXT&quot;</code></pre>
<pre class="r"><code>DBI::dbDataType(RSQLite::SQLite(), 1:5)</code></pre>
<pre><code>## [1] &quot;INTEGER&quot;</code></pre>
<pre class="r"><code>DBI::dbDataType(RSQLite::SQLite(), 1.5)</code></pre>
<pre><code>## [1] &quot;REAL&quot;</code></pre>
</div>
<div id="others" class="section level2">
<h2>Others</h2>
<div id="remove-table-from-database" class="section level3">
<h3>remove table from database</h3>
<pre class="r"><code>DBI::dbRemoveTable(con, &quot;trial&quot;)</code></pre>
<pre><code>## Warning: Closing open result set, pending rows</code></pre>
</div>
<div id="check-if-table-has-been-removed" class="section level3">
<h3>check if table has been removed</h3>
<pre class="r"><code>DBI::dbListTables(con)</code></pre>
<pre><code>## [1] &quot;ecom&quot;         &quot;sqlite_stat1&quot; &quot;sqlite_stat4&quot;</code></pre>
</div>
<div id="generate-sql-query" class="section level3">
<h3>Generate SQL Query</h3>
<pre class="r"><code>DBI::sqlCreateTable(con, &quot;new&quot;, c(x = &quot;integer&quot;, y = &quot;text&quot;))</code></pre>
<pre><code>## &lt;SQL&gt; CREATE TABLE `new` (
##   `x` integer,
##   `y` text
## )</code></pre>
</div>
</div>
<div id="append-table" class="section level2">
<h2>Append Table</h2>
<pre class="r"><code>DBI::sqlAppendTable(con, &quot;ecom&quot;, head(ecom))</code></pre>
<pre><code>## &lt;SQL&gt; INSERT INTO `ecom`
##   (`referrer`, `device`, `bouncers`, `n_visit`, `n_pages`, `duration`)
## VALUES
##   (&#39;google&#39;, &#39;laptop&#39;, &#39;true&#39;, 10, 1, 693),
##   (&#39;yahoo&#39;, &#39;tablet&#39;, &#39;true&#39;, 9, 1, 459),
##   (&#39;direct&#39;, &#39;laptop&#39;, &#39;true&#39;, 0, 1, 996),
##   (&#39;bing&#39;, &#39;tablet&#39;, &#39;false&#39;, 3, 18, 468),
##   (&#39;yahoo&#39;, &#39;mobile&#39;, &#39;true&#39;, 9, 1, 955),
##   (&#39;yahoo&#39;, &#39;laptop&#39;, &#39;false&#39;, 5, 5, 135)</code></pre>
</div>
<div id="close-connection" class="section level2">
<h2>Close Connection</h2>
<pre class="r"><code>DBI::dbDisconnect(con)</code></pre>
</div>


  
<div class="prev-next-post pure-g">
  <div class="pure-u-1-24" style="text-align: left;">
    
    <a href="../../post/rmysql-for-beginners/"><i class="fa fa-chevron-left"></i></a>
    
  </div>
  <div class="pure-u-10-24">
    
    <nav class="prev">
      <a href="../../post/rmysql-for-beginners/">RMySQL for Beginners</a>
    </nav>
    
  </div>
  <div class="pure-u-2-24">
    &nbsp;
  </div>
  <div class="pure-u-10-24">
    
    <nav class="next">
      <a href="../../post/readable-code-with-pipes/">Readable Code with Pipes</a>
    </nav>
    
  </div>
  <div class="pure-u-1-24" style="text-align: right;">
    
    <a href="../../post/readable-code-with-pipes/"><i class="fa fa-chevron-right"></i></a>
    
  </div>
</div>



  

</div>

</div>
</div>
<script src="../../js/ui.js"></script>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57270671-2', 'auto');
  ga('send', 'pageview');

</script>



</body>
</html>

